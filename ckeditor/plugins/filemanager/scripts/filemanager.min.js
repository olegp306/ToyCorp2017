(function(n){function ut(n){var t=this.window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;if(!t)throw new Error("XMLHttpRequest not supported");return(t.open("HEAD",n,!1),t.send(null),t.status==200)?!0:!1}function o(t,i){return t["File Type"]=="dir"&&i=="download"?!1:typeof t.Capabilities=="undefined"?!0:n.inArray(i,t.Capabilities)>-1}function c(t){var r=t.attr("class").replace(/ /g,"_"),i;return r==""?"itemOptions":(n("#"+r).length||(i=n("#itemOptions").clone().attr("id",r),t.hasClass("cap_select")||n(".select",i).remove(),t.hasClass("cap_download")||n(".download",i).remove(),t.hasClass("cap_rename")||n(".rename",i).remove(),t.hasClass("cap_delete")||n(".delete",i).remove(),n("#itemOptions").after(i)),r)}var t;n.urlParam=function(n){var t=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(window.location.href);return t?t[1]:0};var r=function(){var t=null;return n.ajax({async:!1,url:"./scripts/filemanager.config.js?ver=2",dataType:"json",cache:!1,success:function(n){t=n}}),t}(),u=r.options.fileConnector||"connectors/"+r.options.lang+"/filemanager."+r.options.lang,e=["select","download","rename","delete"];n.urlParam("langCode")!=0&&ut("scripts/languages/"+n.urlParam("langCode")+".js?ver=2")&&(r.options.culture=n.urlParam("langCode"));t=[];n.ajax({url:"scripts/languages/"+r.options.culture+".js?ver=2",async:!1,dataType:"json",success:function(n){t=n}});n.prompt.setDefaults({overlayspeed:"fast",show:"fadeIn",opacity:.4,persistent:!1});var b=function(){var t=20,i,u;r.options.searchBox===!0&&(t+=33);i=n(window).height()-n("#uploader").height()-t;n("#splitter, #filetree, #fileinfo, .vsplitbar").height(i);u=n("#splitter").width()-6-n("#filetree").width();n("#fileinfo").width(u)},h=function(n,t){if(t=typeof t=="undefined"?!0:!1,r.options.showFullPath==!1){if("function"==typeof displayPathDecorator)return displayPathDecorator(n.replace(fileRoot,"/"));if(n=n.replace(fileRoot,"/"),n.length>50&&t===!0){var i=n.split("/");n="/"+i[1]+"/"+i[2]+"/(...)/"+i[i.length-2]+"/"}return n}return n},a=function(t){t=="grid"?(n("#grid").addClass("ON"),n("#list").removeClass("ON")):(n("#list").addClass("ON"),n("#grid").removeClass("ON"))};var ft=function(n,t,r){var u=String(r),f,e;for(i=0;i<n.length;i++)f=RegExp(n[i],"g"),e=t[i],u=u.replace(f,e);return u},v=function(n){var t="";return t=ft(["Š","š","Đ","đ","Ž","ž","Č","č","Ć","ć","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ñ","Ò","Ó","Ô","Õ","Ö","Ő","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","ő","ø","ù","ú","û","ý","ý","þ","ÿ","Ŕ","ŕ"," ","'","/","а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я","А","Б","В","Г","Д","Е","Ё","Ж","З","И","Й","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц","Ч","Ш","Щ","Ъ","Ы","Ь","Э","Ю","Я"],["S","s","Dj","dj","Z","z","C","c","C","c","A","A","A","A","A","A","A","C","E","E","E","E","I","I","I","I","N","O","O","O","O","O","O","O","U","U","U","U","Y","B","Ss","a","a","a","a","a","a","a","c","e","e","e","e","i","i","i","i","o","n","o","o","o","o","o","o","o","u","u","u","y","y","b","y","R","r","_","_","","a","b","v","g","d","e","e","zh","z","i","I","k","l","m","n","o","p","r","s","t","u","f","h","c","ch","sh","sch","'","y","'","e","yu","ya","A","B","V","G","D","E","E","ZH","Z","I","I","K","L","M","N","O","P","R","S","T","U","F","H","C","CH","SH","SCH","'","y","'","E","YU","YA"],n),r.options.chars_only_latin&&(t=t.replace(/[^_a-zA-Z0-9]/g,"")),t.replace(/[_]+/g,"_")},et=function(n){return filename="",filename=n.lastIndexOf(".")!=-1?v(n.substr(0,n.lastIndexOf(".")))+("."+n.split(".").pop()):v(n)},k=function(n){for(var i=parseFloat(n),r=parseFloat(1024),u=0,f=[t.bytes,t.kb,t.mb,t.gb];;){if(i<r)return i=Math.round(i*100)/100,i+f[u];i/=r;u+=1}},d=function(t){n("#fileinfo").html("<h1>"+t+"<\/h1>");n("#newfile").attr("disabled","disabled");n("#upload").attr("disabled","disabled");n("#newfolder").attr("disabled","disabled")};var ot=function(t){return r.security.uploadPolicy=="DISALLOW_ALL"&&n.inArray(s(t),r.security.uploadRestrictions)!=-1?!0:r.security.uploadPolicy=="ALLOW_ALL"&&n.inArray(s(t),r.security.uploadRestrictions)==-1?!0:!1},dt=function(n,t){var i=n.replace(/^.*[\/\\]/g,"");return typeof t=="string"&&i.substr(i.length-t.length)==t&&(i=i.substr(0,i.length-t.length)),i},s=function(n){return n.split(".").length==1?"":n.split(".").pop().toLowerCase()},st=function(n){return n.lastIndexOf(".")!=-1?n.substring(0,n.lastIndexOf(".")):n},ht=function(t){return n.inArray(s(t),r.videos.videosExt)!=-1?!0:!1},ct=function(t){return n.inArray(s(t),r.audios.audiosExt)!=-1?!0:!1},lt=function(t){var i="<video width="+r.videos.videosPlayerWidth+" height="+r.videos.videosPlayerHeight+' src="'+t.Path+'" controls="controls">';i+='<img src="'+t.Preview+'" />';i+="<\/video>";n("#fileinfo img").remove();n("#fileinfo #preview h1").before(i)},at=function(t){var i='<audio src="'+t.Path+'" controls="controls">';i+='<img src="'+t.Preview+'" />';i+="<\/audio>";n("#fileinfo img").remove();n("#fileinfo #preview h1").before(i)},vt=function(t){n("#fileinfo").find("td:first-child").each(function(){var r=n(this).attr("title"),i=n("#filetree").find('a[rel="'+r+'"]').parent();typeof i.css("background-image")!="undefined"&&(n(this).css("background-image",i.css("background-image")),window.clearInterval(t))})},y=function(i){n("#currentpath").val(i);n("#uploader h1").text(t.current_folder+h(i)).attr("title",h(i,!1));n("#newfolder").unbind().click(function(){var i=t.default_foldername,e=t.prompt_foldername+' : <input id="fname" name="fname" type="text" value="'+i+'" />',o=function(r,e){var o,s;if(r!=1)return!1;o=e.children("#fname").val();o!=""?(i=v(o),s=new Date,n.getJSON(u+"?mode=addfolder&path="+n("#currentpath").val()+"&name="+i+"&time="+s.getMilliseconds(),function(t){t.Code==0?(bt(t.Parent,t.Name),f(t.Parent),n("#filetree").find('a[rel="'+t.Parent+'/"]').click().click()):n.prompt(t.Error)})):n.prompt(t.no_foldername)},r={};r[t.create_folder]=!0;r[t.cancel]=!1;n.prompt(e,{callback:o,buttons:r})})},g=function(i){n("#fileinfo button").each(function(){n(this).find("span").length==0&&n(this).wrapInner("<span><\/span>")});o(i,"select")?(n("#fileinfo").find("button#select").click(function(){p(i)}).show(),(window.opener||window.tinyMCEPopup)&&(n("#preview img").attr("title",t.select),n("#preview img").click(function(){p(i)}).css("cursor","pointer"))):n("#fileinfo").find("button#select").hide();o(i,"rename")?n("#fileinfo").find("button#rename").click(function(){var t=tt(i);t.length&&n("#fileinfo > h1").text(t)}).show():n("#fileinfo").find("button#rename").hide();o(i,"delete")?n("#fileinfo").find("button#delete").click(function(){it(i)&&n("#fileinfo").html("<h1>"+t.select_from_left+"<\/h1>")}).show():n("#fileinfo").find("button#delete").hide();o(i,"download")?n("#fileinfo").find("button#download").click(function(){window.location=u+"?mode=download&path="+encodeURIComponent(i.Path)}).show():n("#fileinfo").find("button#download").hide()},nt=function(){n("#filetree").fileTree({root:fileRoot,datafunc:kt,multiFolder:!1,folderCallback:function(n){f(n)},expandedFolder:fullexpandedFolder,after:function(){n("#filetree").find("li a").each(function(){n(this).contextMenu({menu:c(n(this))},function(t,i){var r=n(i).attr("rel");l(t,r)})});r.options.searchBox==!0&&(n("#q").liveUpdate("#filetree ul").blur(),n("#search span.q-inactive").html(t.search),n("#search a.q-reset").attr("title",t.search_reset))}},function(n){rt(n)})},p=function(i){var u,f;if(u=r.options.relPath!=!1?relPath+i.Path.replace(fileRoot,""):relPath+i.Path,window.opener||window.tinyMCEPopup||n.urlParam("field_name")){if(window.tinyMCEPopup){f=tinyMCEPopup.getWindowArg("window");f.document.getElementById(tinyMCEPopup.getWindowArg("input")).value=u;typeof f.ImageDialog!="undefined"&&(f.ImageDialog.getImageData&&f.ImageDialog.getImageData(),f.ImageDialog.showPreviewImage&&f.ImageDialog.showPreviewImage(u));tinyMCEPopup.close();return}if(n.urlParam("field_name"))parent.document.getElementById(n.urlParam("field_name")).value=u,typeof top.tinyMCE!="undefined"&&top.tinyMCE.activeEditor.windowManager.close(),typeof parent.$.fn.colorbox!="undefined"&&parent.$.fn.colorbox.close();else if(n.urlParam("CKEditor"))window.opener.CKEDITOR.tools.callFunction(n.urlParam("CKEditorFuncNum"),u);else if(i.Properties.Width!=""){var e=u,o=i.Properties.Width,s=i.Properties.Height;window.opener.SetUrl(e,o,s)}else window.opener.SetUrl(u);window.close()}else n.prompt(t.fck_select_integration)},tt=function(i){var e="",o=t.new_filename+' : <input id="rname" name="rname" type="text" value="'+st(i.Filename)+'" />',h=function(f,o){var c,l,h,a;if(f!=1)return!1;rname=o.children("#rname").val();rname!=""&&(c=et(rname),l=s(i.Filename),l.length>0&&(c=c+"."+l),h=i.Path,a=u+"?mode=rename&old="+i.Path+"&new="+c,n.ajax({type:"GET",url:a,dataType:"json",async:!1,success:function(u){var o,f,s;u.Code==0?(o=u["New Path"],f=u["New Name"],pt(h,o,f),s=n("#preview h1").attr("title"),typeof s!="undefined"&&s==h&&n("#preview h1").text(f),n("#fileinfo").data("view")=="grid"?(n('#fileinfo img[alt="'+h+'"]').parent().next("p").text(f),n('#fileinfo img[alt="'+h+'"]').attr("alt",o)):(n('#fileinfo td[title="'+h+'"]').text(f),n('#fileinfo td[title="'+h+'"]').attr("title",o)),n("#preview h1").html(f),i.Path=o,i.Filename=f,n("#fileinfo").find("button#rename, button#delete, button#download").unbind(),g(i),r.options.showConfirmation&&n.prompt(t.successful_rename)):n.prompt(u.Error);e=u["New Name"]}}))},f={};return f[t.rename]=!0,f[t.cancel]=!1,n.prompt(o,{callback:h,buttons:f}),e},it=function(i){var f=!1,o=t.confirmation_delete,s=function(e){if(e!=1)return!1;var o=u+"?mode=delete&path="+encodeURIComponent(i.Path),s=i.Path.split("/").reverse().slice(1).reverse().join("/")+"/";n.ajax({type:"GET",url:o,dataType:"json",async:!1,success:function(i){if(i.Code==0){wt(i.Path);var u=i.Path.substring(0,i.Path.length-1);u=u.substr(0,u.lastIndexOf("/")+1);n("#uploader h1").text(t.current_folder+h(u)).attr("title",h(u,!1));f=!0;r.options.showConfirmation&&n.prompt(t.successful_delete);n("#filetree").find('a[rel="'+s+'/"]').click().click()}else f=!1,n.prompt(i.Error)}})},e={};return e[t.yes]=!0,e[t.no]=!1,n.prompt(o,{callback:s,buttons:e}),f},yt=function(i,u){var c=s(u),o=n("#filetree").find('a[rel="'+i+'"]'),e=o.parent(),h='<li class="file ext_'+c+'"><a rel="'+i+u+'" href="#" class="">'+u+"<\/a><\/li>";e.find("ul").size()?(e.find("ul").prepend(h),o.click().click()):(e=n("#filetree").find("ul.jqueryFileTree"),e.prepend(h),nt());f(i);r.options.showConfirmation&&n.prompt(t.successful_added_file)},pt=function(t,i,r){var u=n("#filetree").find('a[rel="'+t+'"]'),f=u.parent().parent().prev("a");u.attr("rel",i).text(r);f.click().click()},wt=function(t){n("#filetree").find('a[rel="'+t+'"]').parent().fadeOut("slow",function(){n(this).remove()});n("#fileinfo").data("view")=="grid"?n('#contents img[alt="'+t+'"]').parent().parent().fadeOut("slow",function(){n(this).remove()}):n("table#contents").find('td[title="'+t+'"]').parent().fadeOut("slow",function(){n(this).remove()});n("#preview").length&&f(t.substr(0,t.lastIndexOf("/")+1))},bt=function(i,u){var e='<li class="directory collapsed"><a rel="'+i+u+'/" href="#">'+u+'<\/a><ul class="jqueryFileTree" style="display: block;"><\/ul><\/li>',o=n("#filetree").find('a[rel="'+i+'"]');i!=fileRoot?o.next("ul").prepend(e).prev("a").click().click():(n("#filetree > ul").prepend(e),n("#filetree").find('li a[rel="'+i+u+'/"]').attr("class","cap_rename cap_delete").click(function(){f(i+u+"/")}).each(function(){n(this).contextMenu({menu:c(n(this))},function(t,i){var r=n(i).attr("rel");l(t,r)})}));r.options.showConfirmation&&n.prompt(t.successful_added_folder)},w=function(t){t.lastIndexOf("/")==t.length-1?(f(t),n("#filetree").find('a[rel="'+t+'"]').click()):rt(t)};var l=function(t,i){var r=new Date;n.getJSON(u+"?mode=getinfo&path="+i+"&time="+r.getMilliseconds(),function(i){var r,f;r=n("#fileinfo").data("view")=="grid"?n("#fileinfo").find('img[alt="'+i.Path+'"]').parent():n("#fileinfo").find('td[title="'+i.Path+'"]').parent();switch(t){case"select":p(i);break;case"download":window.location=u+"?mode=download&path="+i.Path;break;case"rename":f=tt(i);break;case"delete":it(i)}})},rt=function(i){var o=i.substr(0,i.lastIndexOf("/")+1),e,s;y(o);e='<div id="preview"><img /><h1><\/h1><dl><\/dl><\/div>';e+='<form id="toolbar">';(window.opener||window.tinyMCEPopup||n.urlParam("field_name"))&&(e+='<button id="select" name="select" type="button" value="Select">'+t.select+"<\/button>");e+='<button id="download" name="download" type="button" value="Download">'+t.download+"<\/button>";r.options.browseOnly!=!0&&(e+='<button id="rename" name="rename" type="button" value="Rename">'+t.rename+"<\/button>");r.options.browseOnly!=!0&&(e+='<button id="delete" name="delete" type="button" value="Delete">'+t.del+"<\/button>");e+='<button id="parentfolder">'+t.parentfolder+"<\/button>";e+="<\/form>";n("#fileinfo").html(e);n("#parentfolder").click(function(){f(o)});s=new Date;n.getJSON(u+"?mode=getinfo&path="+encodeURIComponent(i)+"&time="+s.getMilliseconds(),function(u){if(u.Code==0){n("#fileinfo").find("h1").text(u.Filename).attr("title",i);n("#fileinfo").find("img").attr("src",u.Preview);ht(u.Filename)&&r.videos.showVideoPlayer==!0&&lt(u);ct(u.Filename)&&r.audios.showAudioPlayer==!0&&at(u);var f="";u.Properties.Width&&u.Properties.Width!=""&&(f+="<dt>"+t.dimensions+"<\/dt><dd>"+u.Properties.Width+"x"+u.Properties.Height+"<\/dd>");u.Properties["Date Created"]&&u.Properties["Date Created"]!=""&&(f+="<dt>"+t.created+"<\/dt><dd>"+u.Properties["Date Created"]+"<\/dd>");u.Properties["Date Modified"]&&u.Properties["Date Modified"]!=""&&(f+="<dt>"+t.modified+"<\/dt><dd>"+u.Properties["Date Modified"]+"<\/dd>");(u.Properties.Size||parseInt(u.Properties.Size)==0)&&(f+="<dt>"+t.size+"<\/dt><dd>"+k(u.Properties.Size)+"<\/dd>");n("#fileinfo").find("dl").html(f);g(u)}else n.prompt(u.Error)})},f=function(i){y(i);n("#fileinfo").html('<img id="activity" src="images/wait30trans.gif" width="30" height="30" />');var s=new Date,f=u+"?path="+encodeURIComponent(i)+"&mode=getfolder&showThumbs="+r.options.showThumbs+"&time="+s.getMilliseconds();n.urlParam("type")&&(f+="&type="+n.urlParam("type"));n.getJSON(f,function(i){var u="",r,f,s,h,a;if(i.Code=="-1"){d(i.Error);return}if(i)if(n("#fileinfo").data("view")=="grid"){u+='<ul id="contents" class="grid">';for(key in i){r=i[key].Properties;f="";for(cap in e)o(i[key],e[cap])&&(f+=" cap_"+e[cap]);s=64;h=r.Width;h>1&&h<s&&(s=h);u+='<li class="'+f+'" title="'+i[key].Path+'"><div class="clip"><img src="'+i[key].Preview+'" width="'+s+'" alt="'+i[key].Path+'" /><\/div><p>'+i[key].Filename+"<\/p>";r.Width&&r.Width!=""&&(u+='<span class="meta dimensions">'+r.Width+"x"+r.Height+"<\/span>");r.Size&&r.Size!=""&&(u+='<span class="meta size">'+r.Size+"<\/span>");r["Date Created"]&&r["Date Created"]!=""&&(u+='<span class="meta created">'+r["Date Created"]+"<\/span>");r["Date Modified"]&&r["Date Modified"]!=""&&(u+='<span class="meta modified">'+r["Date Modified"]+"<\/span>");u+="<\/li>"}u+="<\/ul>"}else{u+='<table id="contents" class="list">';u+='<thead><tr><th class="headerSortDown"><span>'+t.name+"<\/span><\/th><th><span>"+t.dimensions+"<\/span><\/th><th><span>"+t.size+"<\/span><\/th><th><span>"+t.modified+"<\/span><\/th><\/tr><\/thead>";u+="<tbody>";for(key in i){var v=i[key].Path,r=i[key].Properties,f="";for(cap in e)o(i[key],e[cap])&&(f+=" cap_"+e[cap]);u+='<tr class="'+f+'">';u+='<td title="'+v+'">'+i[key].Filename+"<\/td>";u+=r.Width&&r.Width!=""?"<td>"+r.Width+"x"+r.Height+"<\/td>":"<td><\/td>";u+=r.Size&&r.Size!=""?'<td><abbr title="'+r.Size+'">'+k(r.Size)+"<\/abbr><\/td>":"<td><\/td>";u+=r["Date Modified"]&&r["Date Modified"]!=""?"<td>"+r["Date Modified"]+"<\/td>":"<td><\/td>";u+="<\/tr>"}u+="<\/tbody>";u+="<\/table>"}else u+="<h1>"+t.could_not_retrieve_folder+"<\/h1>";n("#fileinfo").html(u);n("#fileinfo").data("view")=="grid"?n("#fileinfo").find("#contents li").click(function(){var t=n(this).find("img").attr("alt");w(t)}).each(function(){n(this).contextMenu({menu:c(n(this))},function(t,i){var r=n(i).find("img").attr("alt");l(t,r)})}):(n("#fileinfo tbody tr").click(function(){var t=n("td:first-child",this).attr("title");w(t)}).each(function(){n(this).contextMenu({menu:c(n(this))},function(t,i){var r=n("td:first-child",i).attr("title");l(t,r)})}),n("#fileinfo").find("table").tablesorter({textExtraction:function(t){return n(t).find("abbr").size()?n(t).find("abbr").attr("title"):t.innerHTML}}),a=setInterval(function(){vt(a)},300))})},kt=function(i,f){var h=new Date,s=u+"?path="+encodeURIComponent(i)+"&mode=getfolder&showThumbs="+r.options.showThumbs+"&time="+h.getMilliseconds();n.urlParam("type")&&(s+="&type="+n.urlParam("type"));n.getJSON(s,function(n){var i="",u;if(n.Code=="-1"){d(n.Error);return}if(n){i+='<ul class="jqueryFileTree" style="display: none;">';for(key in n){u="";for(cap in e)o(n[key],e[cap])&&(u+=" cap_"+e[cap]);n[key]["File Type"]=="dir"?i+='<li class="directory collapsed"><a href="#" class="'+u+'" rel="'+n[key].Path+'">'+n[key].Filename+"<\/a><\/li>":r.options.listFiles&&(i+='<li class="file ext_'+n[key]["File Type"].toLowerCase()+'"><a href="#" class="'+u+'" rel="'+n[key].Path+'">'+n[key].Filename+"<\/a><\/li>")}i+="<\/ul>"}else i+="<h1>"+t.could_not_retrieve_folder+"<\/h1>";f(i)})};n(function(){if(r.extras.extra_js)for(var i=0;i<r.extras.extra_js.length;i++)n.ajax({url:r.extras.extra_js[i],dataType:"script",async:r.extras.extra_js_async});r.options.fileRoot?(fileRoot=r.options.serverRoot?"/"+r.options.fileRoot:r.options.fileRoot,fileRoot=fileRoot.replace(/\/\//g,"/")):fileRoot="/"+document.location.pathname.substring(1,document.location.pathname.lastIndexOf("/")+1)+"userfiles/";relPath=r.options.relPath===!1?window.location.protocol+"//"+window.location.host:r.options.relPath;n.urlParam("expandedFolder")!=0?(expandedFolder=n.urlParam("expandedFolder"),fullexpandedFolder=fileRoot+expandedFolder):(expandedFolder="",fullexpandedFolder=null);r.options.autoload==!0&&(n("#upload").append(t.upload),n("#newfolder").append(t.new_folder),n("#grid").attr("title",t.grid_view),n("#list").attr("title",t.list_view),n("#fileinfo h1").append(t.select_from_left),n('#itemOptions a[href$="#select"]').append(t.select),n('#itemOptions a[href$="#download"]').append(t.download),n('#itemOptions a[href$="#rename"]').append(t.rename),n('#itemOptions a[href$="#delete"]').append(t.del));n("#browse").append("+");n("#browse").attr("title",t.browse);n("#newfile").change(function(){n("#filepath").val(n(this).val().replace(/.+[\\\/]/,""))});r.options.searchBox===!0?n.getScript("./scripts/filemanager.liveSearch.min.js"):n("#search").remove();n("button").wrapInner("<span><\/span>");n("#fileinfo").data("view",r.options.defaultViewMode);a(r.options.defaultViewMode);n("#home").click(function(){var t=n("#fileinfo").data("view");n("#fileinfo").data("view",t);n("#filetree>ul>li.expanded>a").trigger("click");f(fileRoot)});n("#grid").click(function(){a("grid");n("#fileinfo").data("view","grid");f(n("#currentpath").val())});n("#list").click(function(){a("list");n("#fileinfo").data("view","list");f(n("#currentpath").val())});y(fileRoot);n("#uploader").attr("action",u);n("#uploader").ajaxForm({target:"#uploadresponse",beforeSubmit:function(i,u){var f,e,o;if(n("#newfile",u).val()=="")return!1;if(!ot(n("#newfile",u).val()))return f="<p>"+t.INVALID_FILE_TYPE+"<\/p>",r.security.uploadPolicy=="DISALLOW_ALL"&&(f+="<p>"+t.ALLOWED_FILE_TYPE+r.security.uploadRestrictions.join(", ")+".<\/p>"),r.security.uploadPolicy=="ALLOW_ALL"&&(f+="<p>"+t.DISALLOWED_FILE_TYPE+r.security.uploadRestrictions.join(", ")+".<\/p>"),n("#filepath").val(""),n.prompt(f),!1;if(n("#upload").attr("disabled",!0),n("#upload span").addClass("loading").text(t.loading_data),n.urlParam("type").toString().toLowerCase()=="images"){e=n("#newfile",u).val().toLowerCase().split(".");for(key in r.images.imagesExt)if(r.images.imagesExt[key]==e[e.length-1])return!0;return n.prompt(t.UPLOAD_IMAGES_ONLY),n("#upload").removeAttr("disabled").find("span").removeClass("loading").text(t.upload),!1}if(typeof FileReader!="undefined"&&typeof r.upload.fileSizeLimit!="auto"&&(o=n("#newfile",u).get(0).files[0].size,o>r.upload.fileSizeLimit*1048576))return n.prompt("<p>"+t.file_too_big+"<\/p><p>"+t.file_size_limit+r.upload.fileSizeLimit+" "+t.mb+".<\/p>"),n("#upload").removeAttr("disabled").find("span").removeClass("loading").text(t.upload),!1},error:function(i){n("#upload").removeAttr("disabled").find("span").removeClass("loading").text(t.upload);n.prompt("Error uploading file"+i.responseText)},success:function(){var i=jQuery.parseJSON(n("#uploadresponse").find("textarea").text());i.Code==0?(yt(i.Path,i.Name),n("#filepath, #newfile").val(""),n("#filetree").find('a[rel="'+i.Path+'/"]').click().click()):n.prompt(i.Error);n("#upload").removeAttr("disabled");n("#upload span").removeClass("loading").text(t.upload);n("#filepath").val("")}});nt();window.opener||window.tinyMCEPopup||n.urlParam("field_name")||n('#itemOptions a[href$="#select"]').remove();r.options.browseOnly==!0&&(n("#file-input-container").remove(),n("#upload").remove(),n("#newfolder").remove(),n("#toolbar").remove("#rename"),n(".contextMenu .rename").remove(),n(".contextMenu .delete").remove());b();n(window).resize(b);n("#splitter").splitter({sizeLeft:200});w(fileRoot+expandedFolder)})})(jQuery);
/*
//# sourceMappingURL=filemanager.min.js.map
*/